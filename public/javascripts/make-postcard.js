(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var setup;

setup = function() {
  var capitalize, schoolsearch;
  capitalize = function(s) {
    var word;
    return ((function() {
      var _i, _len, _ref, _results;
      _ref = s.split(/\s+/);
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        word = _ref[_i];
        _results.push(word[0].toUpperCase() + word.slice(1).toLowerCase());
      }
      return _results;
    })()).join(' ');
  };
  schoolsearch = new Bloodhound({
    datumTokenizer: function(d) {
      return Bloodhound.tokenizers.whitespace(d.num);
    },
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    remote: {
      url: '/schools/by-name?text=%QUERY',
      filter: function(schools) {
        return $.map(schools, function(school) {
          school.name = capitalize(school.name);
          return school;
        });
      }
    }
  });
  schoolsearch.initialize();
  $('#video-button-desktop').click(function() {
    console.log('click on vid buttn');
    $('#video-modal').modal();
    if (window.VIDRECORDER == null) {
      window.VIDRECORDER = {};
    }
    window.VIDRECORDER.close = function() {
      return $('#video-modal').modal('hide');
    };
    return console.log('attached handler');
  });
  $('#teacher_name').keyup(function() {
    $('#mailto_name').val($(this).val());
  });
  $('#author_name').keyup(function() {
    $('#return_name').val($(this).val());
  });
  $('#mailto_school').focus(function() {
    $('#school_modal').modal('show');
  });
  $('#send_button').click(function() {
    var contents;
    contents = {
      teacherName: $('#teacher_name').text(),
      teacherRole: $('#teacher_role').text(),
      message: $('#freetext').text(),
      authorName: $('#author_name').text(),
      authorRole: $('#author_role').text(),
      anonRequest: $('#checkbox_input').is(':checked'),
      returnName: $('#return_name').text(),
      returnEmail: $('#return_email').text(),
      mailtoName: $('#mailto_name').text(),
      mailtoRole: $('#mailto_role').text(),
      mailtoSchool: $('#mailto_school').text(),
      mailtoStreet: $('#mailto_street').text(),
      mailtoCityState: $('#mailto_city_state').text(),
      youtubeId: $('#youtube_id').val()
    };
    console.log(contents);
    return contents;
  });
  $("#mailto_school").typeahead(null, {
    displayKey: "name",
    source: schoolsearch.ttAdapter(),
    minLength: 4
  });
  $("#mailto_school").bind("typeahead:selected", function(event, data, dataset) {
    $('#mailto_street').val(data.mailingAddress.capitalize());
    $('#mailto_city_state').val(data.city.capitalize() + ", " + data.state + " " + data.zip);
  });
};

$(function() {
  require('../share-buttons').setup();
  require('./video-upload').setup();
  return setup();
});


},{"../share-buttons":3,"./video-upload":2}],2:[function(require,module,exports){
var auth, config, constants, does_meet_requirements, utils, webcam,
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

config = {
  OAUTH2_CLIENT_ID: '40051200930.apps.googleusercontent.com',
  DEVELOPER_KEY: '40051200930.apps.googleusercontent.com',
  VIDEO_CATEGORY: 'Education'
};

constants = {
  CATEGORIES_CACHE_EXPIRATION_MINUTES: 3 * 24 * 60,
  CATEGORIES_CACHE_KEY: 'categories',
  DISPLAY_NAME_CACHE_KEY: 'display_name',
  UPLOADS_LIST_ID_CACHE_KEY: 'uploads_list_id',
  PROFILE_PICTURE_CACHE_KEY: 'profile_picture',
  GENERIC_PROFILE_PICTURE_URL: '//s.ytimg.com/yt/img/no_videos_140-vfl1fDI7-.png',
  OAUTH2_TOKEN_TYPE: 'Bearer',
  OAUTH2_SCOPE: 'https://gdata.youtube.com',
  GDATA_SERVER: 'https://gdata.youtube.com',
  CLIENT_LIB_LOAD_CALLBACK: 'onClientLibReady',
  CLIENT_LIB_URL: 'https://apis.google.com/js/client.js?onload=',
  YOUTUBE_API_SERVICE_NAME: 'youtube',
  YOUTUBE_API_VERSION: 'v3',
  PAGE_SIZE: 50,
  MAX_ITEMS_TO_RETRIEVE: 200,
  FEED_CACHE_MINUTES: 5,
  STATE_CACHE_MINUTES: 15,
  MAX_KEYWORD_LENGTH: 30,
  KEYWORD_UPDATE_XML_TEMPLATE: '<?xml version="1.0"?> <entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yt="http://gdata.youtube.com/schemas/2007" xmlns:gd="http://schemas.google.com/g/2005" gd:fields="media:group/media:keywords"> <media:group> <media:keywords>{0}</media:keywords> </media:group> </entry>',
  WIDGET_EMBED_CODE: '<iframe width="420" height="500" src="{0}#playlist={1}"></iframe>',
  PLAYLIST_EMBED_CODE: '<iframe width="640" height="360" src="//www.youtube.com/embed/?listType=playlist&list={0}&showinfo=1" frameborder="0" allowfullscreen></iframe>',
  SUBMISSION_RSS_FEED: 'https://gdata.youtube.com/feeds/api/videos?v=2&alt=rss&orderby=published&category=%7Bhttp%3A%2F%2Fgdata.youtube.com%2Fschemas%2F2007%2Fkeywords.cat%7D{0}',
  DEFAULT_KEYWORD: 'ytdl',
  WEBCAM_VIDEO_TITLE: 'Webcam Submission',
  WEBCAM_VIDEO_DESCRIPTION: 'Uploaded via a webcam.',
  REJECTED_VIDEOS_PLAYLIST: 'Rejected YTDL Submissions',
  NO_THUMBNAIL_URL: '//i.ytimg.com/vi/hqdefault.jpg',
  VIDEO_CONTAINER_TEMPLATE: '<li><div class="video-container {additionalClass}"><input type="button" class="submit-video-button" value="Submit Video"><div><span class="video-title">{title}</span><span class="video-duration">({duration})</span></div><div class="video-uploaded">Uploaded on {uploadedDate}</div><div class="thumbnail-container" data-video-id="{videoId}"><img src="{thumbnailUrl}" class="thumbnail-image"><img src="images/play.png" class="play-overlay"></div></div></li>',
  VIDEO_LI_TEMPLATE: '<li><div class="video-container {0}"><input type="button" class="submit-video-button" data-video-id="{1}" data-existing-keywords="{2}" value="Submit Video"><div><span class="video-title">{3}</span><span class="video-duration">({5})</span></div><div class="video-uploaded">Uploaded on {4}</div><div class="thumbnail-container" data-video-id="{1}"><img src="{6}" class="thumbnail-image"><img src="./images/play.png" class="play-overlay"></div></div></li>',
  ADMIN_VIDEO_LI_TEMPLATE: '<li><div class="video-container">{buttonsHtml}<div><span class="video-title">{title}</span><span class="video-duration">({duration})</span></div><div class="video-uploaded">Uploaded on {uploadedDate} by {uploader}</div><div class="thumbnail-container" data-video-id="{videoId}"><img src="{thumbnailUrl}" class="thumbnail-image"><img src="./images/play.png" class="play-overlay"></div></div></li>',
  PLAYLIST_LI_TEMPLATE: '<li data-playlist-name="{playlistName}" data-state="embed-codes" data-playlist-id="{playlistId}">{playlistName}</li>'
};

webcam = {
  init: function() {
    if ((typeof YT === "undefined" || YT === null) || (YT.UploadWidget == null)) {
      window.onYouTubeIframeAPIReady = function() {
        return webcam.loadUploadWidget();
      };
      return $.getScript('//www.youtube.com/iframe_api');
    } else {
      return webcam.loadUploadWidget();
    }
  },
  loadUploadWidget: function() {
    return new YT.UploadWidget('webcam-widget', {
      webcamOnly: true,
      events: {
        onApiReady: function(event) {
          event.target.setVideoTitle(config.VIDEO_TITLE || constants.WEBCAM_VIDEO_TITLE);
          return event.target.setVideoDescription(config.VIDEO_DESCRIPTION || constants.WEBCAM_VIDEO_DESCRIPTION);
        },
        onUploadSuccess: function(event) {
          console.log("Webcam submission success!");
          console.log(event);
          $('#youtube_id').val(event.data.videoId);
          return window.VIDRECORDER.close();
        },
        onStateChange: function(event) {
          if (event.data.state === YT.UploadWidgetState.ERROR) {
            return console.error("Webcam submission error!");
          }
        }
      }
    });
  }
};

utils = {
  itemsInResponse: function(response) {
    return __indexOf.call(response, 'items') >= 0 && response.items.length > 0;
  }
};

auth = {
  initAuth: function() {
    window[constants.CLIENT_LIB_LOAD_CALLBACK] = function() {
      return gapi.auth.init(function() {
        if (lscache.get(constants.DISPLAY_NAME_CACHE_KEY)) {
          window.setTimeout(function() {
            return gapi.auth.authorize({
              client_id: config.OAUTH2_CLIENT_ID,
              scope: [constants.OAUTH2_SCOPE],
              immediate: true
            }, auth.onAuthResult);
          }, 1);
          return console.log('auth script launched');
        } else {
          return console.log('requesting YT login');
        }
      });
    };
    return $.getScript(constants.CLIENT_LIB_URL + constants.CLIENT_LIB_LOAD_CALLBACK);
  },
  onAuthResult: function(authResult) {
    if (authResult) {
      console.log('Got auth result', authResult);
      return gapi.client.load(constants.YOUTUBE_API_SERVICE_NAME, constants.YOUTUBE_API_VERSION, auth.onYouTubeClientLoad);
    } else {
      console.log('Auth failed');
      return lscache.flush();
    }
  },
  onYouTubeClientLoad: function() {
    var request;
    console.log('Youtube client loaded!');
    if (lscache.get(constants.DISPLAY_NAME_CACHE_KEY)) {

    } else {
      request = gapi.client[constants.YOUTUBE_API_SERVICE_NAME].channels.list({
        mine: true,
        part: 'snippet,contentDetails,status'
      });
      return request.execute(function(response) {
        if (utils.itemsInResponse(response)) {
          if (response.items[0].status.isLinked) {
            lscache.set(constants.UPLOADS_LIST_ID_CACHE_KEY, response.items[0].contentDetails.relatedPlaylists.uploads);
            lscache.set(constants.DISPLAY_NAME_CACHE_KEY, response.items[0].snippet.title);
            return lscache.set(constants.PROFILE_PICTURE_CACHE_KEY, response.items[0].snippet.thumbnails["default"].url);
          } else {
            return console.error('Your account cannot upload videos. Please visit <a target="_blank" href="https://www.youtube.com/signin?next=/create_channel">https://www.youtube.com/signin?next=/create_channel</a> to add a YouTube channel to your account, and try again.');
          }
        } else {
          console.log(response);
          return console.error("Unable to retrieve channel info.");
        }
      });
    }
  }
};

does_meet_requirements = function() {
  if (!$.support.cors) {
    console.error("Browser not supported!");
    return false;
  } else {
    return true;
  }
};

exports.setup = function() {
  if (!config.OAUTH2_CLIENT_ID || !config.DEVELOPER_KEY) {
    return console.log("NOT CONFIGURED!");
  } else {
    console.log("Configured!");
    if (does_meet_requirements) {
      auth.initAuth();
      return webcam.init();
    }
  }
};


},{}],3:[function(require,module,exports){
var setupFacebook, setupTwitter, siteUrl;

siteUrl = 'http://www.thank-a-teacher.org';

setupFacebook = function() {
  $.getScript('//connect.facebook.net/en_UK/all.js', function() {
    return FB.init({
      appId: '1444954685735176'
    });
  });
  return $('#share-facebook').click(function() {
    return FB.ui({
      method: 'feed',
      link: siteUrl,
      caption: 'Thank a teacher!'
    });
  });
};

setupTwitter = function() {
  var encoded, twitterUrl;
  encoded = encodeURIComponent(siteUrl);
  twitterUrl = "https://twitter.com/share?url=" + encoded + "&via=wmmedu";
  return $('#share-twitter').attr('href', twitterUrl).attr('target', '_blank');
};

exports.setup = function() {
  setupFacebook();
  return setupTwitter();
};


},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENoYXNlXFxEcm9wYm94XFxEZXZcXHN0b3JpZXMuZWR1XFxub2RlX21vZHVsZXNcXGJyb3dzZXJpZnlcXG5vZGVfbW9kdWxlc1xcYnJvd3Nlci1wYWNrXFxfcHJlbHVkZS5qcyIsIkM6XFxVc2Vyc1xcQ2hhc2VcXERyb3Bib3hcXERldlxcc3Rvcmllcy5lZHVcXGNsaWVudFxcanNcXHBvc3RjYXJkXFxtYWtlLmNvZmZlZSIsIkM6XFxVc2Vyc1xcQ2hhc2VcXERyb3Bib3hcXERldlxcc3Rvcmllcy5lZHVcXGNsaWVudFxcanNcXHBvc3RjYXJkXFx2aWRlby11cGxvYWQuY29mZmVlIiwiQzpcXFVzZXJzXFxDaGFzZVxcRHJvcGJveFxcRGV2XFxzdG9yaWVzLmVkdVxcY2xpZW50XFxqc1xcc2hhcmUtYnV0dG9ucy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNDQSxJQUFBLEtBQUE7O0FBQUEsS0FBQSxHQUFRLFNBQUEsR0FBQTtBQUVKLE1BQUEsd0JBQUE7QUFBQSxFQUFBLFVBQUEsR0FBYSxTQUFDLENBQUQsR0FBQTtBQUNULFFBQUEsSUFBQTtXQUFBOztBQUFDO0FBQUE7V0FBQSwyQ0FBQTt3QkFBQTtBQUFBLHNCQUFBLElBQUssQ0FBQSxDQUFBLENBQUUsQ0FBQyxXQUFSLENBQUEsQ0FBQSxHQUF3QixJQUFLLFNBQUssQ0FBQyxXQUFYLENBQUEsRUFBeEIsQ0FBQTtBQUFBOztRQUFELENBQTRFLENBQUMsSUFBN0UsQ0FBa0YsR0FBbEYsRUFEUztFQUFBLENBQWIsQ0FBQTtBQUFBLEVBR0EsWUFBQSxHQUFtQixJQUFBLFVBQUEsQ0FDZjtBQUFBLElBQUEsY0FBQSxFQUFnQixTQUFDLENBQUQsR0FBQTthQUNaLFVBQVUsQ0FBQyxVQUFVLENBQUMsVUFBdEIsQ0FBaUMsQ0FBQyxDQUFDLEdBQW5DLEVBRFk7SUFBQSxDQUFoQjtBQUFBLElBRUEsY0FBQSxFQUFnQixVQUFVLENB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Q0FBQSxDQUFBO1NBR0EsQ0FBQSxDQUFFLGlCQUFGLENBQW9CLENBQUMsS0FBckIsQ0FBMkIsU0FBQSxHQUFBO1dBQ3ZCLEVBQUUsQ0FBQyxFQUFILENBQ0k7QUFBQSxNQUFBLE1BQUEsRUFBUSxNQUFSO0FBQUEsTUFDQSxJQUFBLEVBQU0sT0FETjtBQUFBLE1BRUEsT0FBQSxFQUFTLGtCQUZUO0tBREosRUFEdUI7RUFBQSxDQUEzQixFQUpZO0FBQUEsQ0FGaEIsQ0FBQTs7QUFBQSxZQVlBLEdBQWUsU0FBQSxHQUFBO0FBQ1gsTUFBQSxtQkFBQTtBQUFBLEVBQUEsT0FBQSxHQUFVLGtCQUFBLENBQW1CLE9BQW5CLENBQVYsQ0FBQTtBQUFBLEVBQ0EsVUFBQSxHQUFjLGdDQUFBLEdBQStCLE9BQS9CLEdBQXdDLGFBRHRELENBQUE7U0FFQSxDQUFBLENBQUUsZ0JBQUYsQ0FDSSxDQUFDLElBREwsQ0FDVSxNQURWLEVBQ2tCLFVBRGxCLENBRUksQ0FBQyxJQUZMLENBRVUsUUFGVixFQUVvQixRQUZwQixFQUhXO0FBQUEsQ0FaZixDQUFBOztBQUFBLE9BbUJPLENBQUMsS0FBUixHQUFnQixTQUFBLEdBQUE7QUFDWixFQUFBLGFBQUEsQ0FBQSxDQUFBLENBQUE7U0FDQSxZQUFBLENBQUEsRUFGWTtBQUFBLENBbkJoQixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcclxuc2V0dXAgPSAtPlxyXG5cclxuICAgIGNhcGl0YWxpemUgPSAocykgLT5cclxuICAgICAgICAod29yZFswXS50b1VwcGVyQ2FzZSgpICsgd29yZFsxLi4uXS50b0xvd2VyQ2FzZSgpIGZvciB3b3JkIGluIHMuc3BsaXQgL1xccysvKS5qb2luICcgJ1xyXG5cclxuICAgIHNjaG9vbHNlYXJjaCA9IG5ldyBCbG9vZGhvdW5kKFxyXG4gICAgICAgIGRhdHVtVG9rZW5pemVyOiAoZCkgLT5cclxuICAgICAgICAgICAgQmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2UgZC5udW1cclxuICAgICAgICBxdWVyeVRva2VuaXplcjogQmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2VcclxuICAgICAgICByZW1vdGU6XHJcbiAgICAgICAgICAgIHVybDogJy9zY2hvb2xzL2J5LW5hbWU/dGV4dD0lUVVFUlknXHJcbiAgICAgICAgICAgIGZpbHRlcjogKHNjaG9vbHMpIC0+XHJcbiAgICAgICAgICAgICAgICAkLm1hcCBzY2hvb2xzLCAoc2Nob29sKSAtPlxyXG4gICAgICAgICAgICAgICAgICAgIHNjaG9vbC5uYW1lID0gY2FwaXRhbGl6ZSBzY2hvb2wubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY2hvb2xcclxuICAgIClcclxuXHJcbiAgICBzY2hvb2xzZWFyY2guaW5pdGlhbGl6ZSgpXHJcblxyXG4gICAgJCgnI3ZpZGVvLWJ1dHRvbi1kZXNrdG9wJykuY2xpY2sgLT5cclxuICAgICAgICBjb25zb2xlLmxvZygnY2xpY2sgb24gdmlkIGJ1dHRuJylcclxuICAgICAgICAkKCcjdmlkZW8tbW9kYWwnKS5tb2RhbCgpXHJcbiAgICAgICAgaWYgbm90IHdpbmRvdy5WSURSRUNPUkRFUj9cclxuICAgICAgICAgICAgd2luZG93LlZJRFJFQ09SREVSID0ge31cclxuICAgICAgICB3aW5kb3cuVklEUkVDT1JERVIuY2xvc2UgPSAoKSAtPiAkKCcjdmlkZW8tbW9kYWwnKS5tb2RhbCgnaGlkZScpXHJcbiAgICAgICAgY29uc29sZS5sb2coJ2F0dGFjaGVkIGhhbmRsZXInKVxyXG5cclxuICAgICQoJyN0ZWFjaGVyX25hbWUnKS5rZXl1cCAtPlxyXG4gICAgICAgICQoJyNtYWlsdG9fbmFtZScpLnZhbCAkKHRoaXMpLnZhbCgpXHJcbiAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgJCgnI2F1dGhvcl9uYW1lJykua2V5dXAgLT5cclxuICAgICAgICAkKCcjcmV0dXJuX25hbWUnKS52YWwgJCh0aGlzKS52YWwoKVxyXG4gICAgICAgIHJldHVyblxyXG5cclxuICAgICQoJyNtYWlsdG9fc2Nob29sJykuZm9jdXMgLT5cclxuICAgICAgICAkKCcjc2Nob29sX21vZGFsJykubW9kYWwoJ3Nob3cnKVxyXG4gICAgICAgIHJldHVyblxyXG5cclxuICAgICQoJyNzZW5kX2J1dHRvbicpLmNsaWNrIC0+XHJcbiAgICAgICAgY29udGVudHMgPVxyXG4gICAgICAgICAgICB0ZWFjaGVyTmFtZTogJCgnI3RlYWNoZXJfbmFtZScpLnRleHQoKVxyXG4gICAgICAgICAgICB0ZWFjaGVyUm9sZTogJCgnI3RlYWNoZXJfcm9sZScpLnRleHQoKVxyXG4gICAgICAgICAgICBtZXNzYWdlOiAkKCcjZnJlZXRleHQnKS50ZXh0KClcclxuICAgICAgICAgICAgYXV0aG9yTmFtZTogJCgnI2F1dGhvcl9uYW1lJykudGV4dCgpXHJcbiAgICAgICAgICAgIGF1dGhvclJvbGU6ICQoJyNhdXRob3Jfcm9sZScpLnRleHQoKVxyXG4gICAgICAgICAgICBhbm9uUmVxdWVzdDogJCgnI2NoZWNrYm94X2lucHV0JykuaXMoJzpjaGVja2VkJylcclxuICAgICAgICAgICAgcmV0dXJuTmFtZTogJCgnI3JldHVybl9uYW1lJykudGV4dCgpXHJcbiAgICAgICAgICAgIHJldHVybkVtYWlsOiAkKCcjcmV0dXJuX2VtYWlsJykudGV4dCgpXHJcbiAgICAgICAgICAgIG1haWx0b05hbWU6ICQoJyNtYWlsdG9fbmFtZScpLnRleHQoKVxyXG4gICAgICAgICAgICBtYWlsdG9Sb2xlOiAkKCcjbWFpbHRvX3JvbGUnKS50ZXh0KClcclxuICAgICAgICAgICAgbWFpbHRvU2Nob29sOiAkKCcjbWFpbHRvX3NjaG9vbCcpLnRleHQoKVxyXG4gICAgICAgICAgICBtYWlsdG9TdHJlZXQ6ICQoJyNtYWlsdG9fc3RyZWV0JykudGV4dCgpXHJcbiAgICAgICAgICAgIG1haWx0b0NpdHlTdGF0ZTogJCgnI21haWx0b19jaXR5X3N0YXRlJykudGV4dCgpXHJcbiAgICAgICAgICAgIHlvdXR1YmVJZDogJCgnI3lvdXR1YmVfaWQnKS52YWwoKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnRzKVxyXG4gICAgICAgIHJldHVybiBjb250ZW50c1xyXG5cclxuICAgICQoXCIjbWFpbHRvX3NjaG9vbFwiKS50eXBlYWhlYWQgbnVsbCxcclxuICAgICAgICBkaXNwbGF5S2V5OiBcIm5hbWVcIlxyXG4gICAgICAgIHNvdXJjZTogc2Nob29sc2VhcmNoLnR0QWRhcHRlcigpXHJcbiAgICAgICAgbWluTGVuZ3RoOiA0XHJcblxyXG4gICAgJChcIiNtYWlsdG9fc2Nob29sXCIpLmJpbmQgXCJ0eXBlYWhlYWQ6c2VsZWN0ZWRcIiwgKGV2ZW50LCBkYXRhLCBkYXRhc2V0KSAtPlxyXG4gICAgICAgICQoJyNtYWlsdG9fc3RyZWV0JykudmFsKGRhdGEubWFpbGluZ0FkZHJlc3MuY2FwaXRhbGl6ZSgpKVxyXG4gICAgICAgICQoJyNtYWlsdG9fY2l0eV9zdGF0ZScpLnZhbChkYXRhLmNpdHkuY2FwaXRhbGl6ZSgpICsgXCIsIFwiICsgZGF0YS5zdGF0ZSArIFwiIFwiICsgZGF0YS56aXApXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICByZXR1cm5cclxuXHJcbiQgLT5cclxuICAgIHJlcXVpcmUoJy4uL3NoYXJlLWJ1dHRvbnMnKS5zZXR1cCgpXHJcbiAgICByZXF1aXJlKCcuL3ZpZGVvLXVwbG9hZCcpLnNldHVwKClcclxuICAgIHNldHVwKCkiLCJjb25maWcgPVxyXG4gICAgIyBSRVFVSVJFRFxyXG4gICAgIyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYXBpLWNsaWVudC1saWJyYXJ5L2phdmFzY3JpcHQvZmVhdHVyZXMvYXV0aGVudGljYXRpb25cclxuICAgICMgZm9yIGluc3RydWN0aW9ucyBvbiByZWdpc3RlcmluZyBmb3IgT0F1dGggMi5cclxuICAgICMgQWZ0ZXIgZ2VuZXJhdGluZyB5b3VyIE9BdXRoIDIgY2xpZW50IGlkLCB5b3UgTVVTVCB0aGVuIHZpc2l0IHRoZSBcIlNlcnZpY2VzXCIgdGFiIG9mXHJcbiAgICAjIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL2FwaXMvY29uc29sZS8gZmluZCB0aGUgZW50cnkgZm9yIFwiWW91VHViZSBEYXRhIEFQSSB2M1wiXHJcbiAgICAjIGFuZCBmbGlwIGl0IHRvIFwiT05cIi5cclxuICAgIE9BVVRIMl9DTElFTlRfSUQ6ICc0MDA1MTIwMDkzMC5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSdcclxuXHJcbiAgICAjIFJFUVVJUkVEXHJcbiAgICAjIFJlZ2lzdGVyIGF0IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL2FwaXMveW91dHViZS9kYXNoYm9hcmQvZ3d0L2luZGV4Lmh0bWwgdG8gZ2V0IHlvdXIgb3duIGtleS5cclxuICAgIERFVkVMT1BFUl9LRVk6ICc0MDA1MTIwMDkzMC5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSdcclxuXHJcbiAgICAjIElmIHlvdSdkIGxpa2UgdG8gZW5hYmxlIEdvb2dsZSBBbmFseXRpY3Mgc3RhdGlzdGljcyB0byB5b3VyIFlvdVR1YmUgRGlyZWN0IExpdGUgaW5zdGFuY2UsXHJcbiAgICAjIHJlZ2lzdGVyIGZvciBhIEdvb2dsZSBBbmFseXRpY3MgYWNjb3VudCBhbmQgZW50ZXIgeW91ciBpZCBjb2RlIGJlbG93LlxyXG4gICAgIyxHT09HTEVfQU5BTFlUSUNTX0lEOiAnVUEtIyMjIyMjIyMtIydcclxuXHJcbiAgICAjIFNldHRpbmcgYW55IG9yIGFsbCBvZiB0aGVzZSB0aHJlZSBmaWVsZHMgYXJlIG9wdGlvbmFsLlxyXG4gICAgIyBJZiBzZXQgdGhlbiB0aGUgdmFsdWUocykgd2lsbCBiZSB1c2VkIGZvciBuZXcgdmlkZW8gdXBsb2FkcywgYW5kIHlvdXIgdXNlcnMgd29uJ3QgYmUgcHJvbXB0ZWQgZm9yIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkcyBvbiB0aGUgdmlkZW8gdXBsb2FkIGZvcm0uXHJcbiAgICAjVklERU9fVElUTEU6ICdWaWRlbyBTdWJtaXNzaW9uJ1xyXG4gICAgI1ZJREVPX0RFU0NSSVBUSU9OOiAnVGhpcyBpcyBhIHZpZGVvIHN1Ym1pc3Npb24uJ1xyXG4gICAgIyBNYWtlIHN1cmUgdGhhdCB0aGlzIGNvcnJlc3BvbmRzIHRvIGFuIGFzc2lnbmFibGUgY2F0ZWdvcnkhXHJcbiAgICAjIFNlZSBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS95b3V0dWJlLzIuMC9yZWZlcmVuY2UjWW91VHViZV9DYXRlZ29yeV9MaXN0XHJcbiAgICBWSURFT19DQVRFR09SWTogJ0VkdWNhdGlvbidcclxuXHJcbmNvbnN0YW50cyA9XHJcbiAgICBDQVRFR09SSUVTX0NBQ0hFX0VYUElSQVRJT05fTUlOVVRFUzogMyAqIDI0ICogNjAsXHJcbiAgICBDQVRFR09SSUVTX0NBQ0hFX0tFWTogJ2NhdGVnb3JpZXMnXHJcbiAgICBESVNQTEFZX05BTUVfQ0FDSEVfS0VZOiAnZGlzcGxheV9uYW1lJ1xyXG4gICAgVVBMT0FEU19MSVNUX0lEX0NBQ0hFX0tFWTogJ3VwbG9hZHNfbGlzdF9pZCdcclxuICAgIFBST0ZJTEVfUElDVFVSRV9DQUNIRV9LRVk6ICdwcm9maWxlX3BpY3R1cmUnXHJcbiAgICBHRU5FUklDX1BST0ZJTEVfUElDVFVSRV9VUkw6ICcvL3MueXRpbWcuY29tL3l0L2ltZy9ub192aWRlb3NfMTQwLXZmbDFmREk3LS5wbmcnXHJcbiAgICBPQVVUSDJfVE9LRU5fVFlQRTogJ0JlYXJlcidcclxuICAgIE9BVVRIMl9TQ09QRTogJ2h0dHBzOi8vZ2RhdGEueW91dHViZS5jb20nXHJcbiAgICBHREFUQV9TRVJWRVI6ICdodHRwczovL2dkYXRhLnlvdXR1YmUuY29tJ1xyXG4gICAgQ0xJRU5UX0xJQl9MT0FEX0NBTExCQUNLOiAnb25DbGllbnRMaWJSZWFkeSdcclxuICAgIENMSUVOVF9MSUJfVVJMOiAnaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvY2xpZW50LmpzP29ubG9hZD0nXHJcbiAgICBZT1VUVUJFX0FQSV9TRVJWSUNFX05BTUU6ICd5b3V0dWJlJ1xyXG4gICAgWU9VVFVCRV9BUElfVkVSU0lPTjogJ3YzJ1xyXG4gICAgUEFHRV9TSVpFOiA1MFxyXG4gICAgTUFYX0lURU1TX1RPX1JFVFJJRVZFOiAyMDBcclxuICAgIEZFRURfQ0FDSEVfTUlOVVRFUzogNVxyXG4gICAgU1RBVEVfQ0FDSEVfTUlOVVRFUzogMTVcclxuICAgIE1BWF9LRVlXT1JEX0xFTkdUSDogMzBcclxuICAgIEtFWVdPUkRfVVBEQVRFX1hNTF9URU1QTEFURTogJzw/eG1sIHZlcnNpb249XCIxLjBcIj8+IDxlbnRyeSB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDUvQXRvbVwiIHhtbG5zOm1lZGlhPVwiaHR0cDovL3NlYXJjaC55YWhvby5jb20vbXJzcy9cIiB4bWxuczp5dD1cImh0dHA6Ly9nZGF0YS55b3V0dWJlLmNvbS9zY2hlbWFzLzIwMDdcIiB4bWxuczpnZD1cImh0dHA6Ly9zY2hlbWFzLmdvb2dsZS5jb20vZy8yMDA1XCIgZ2Q6ZmllbGRzPVwibWVkaWE6Z3JvdXAvbWVkaWE6a2V5d29yZHNcIj4gPG1lZGlhOmdyb3VwPiA8bWVkaWE6a2V5d29yZHM+ezB9PC9tZWRpYTprZXl3b3Jkcz4gPC9tZWRpYTpncm91cD4gPC9lbnRyeT4nXHJcbiAgICBXSURHRVRfRU1CRURfQ09ERTogJzxpZnJhbWUgd2lkdGg9XCI0MjBcIiBoZWlnaHQ9XCI1MDBcIiBzcmM9XCJ7MH0jcGxheWxpc3Q9ezF9XCI+PC9pZnJhbWU+J1xyXG4gICAgUExBWUxJU1RfRU1CRURfQ09ERTogJzxpZnJhbWUgd2lkdGg9XCI2NDBcIiBoZWlnaHQ9XCIzNjBcIiBzcmM9XCIvL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8/bGlzdFR5cGU9cGxheWxpc3QmbGlzdD17MH0mc2hvd2luZm89MVwiIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nXHJcbiAgICBTVUJNSVNTSU9OX1JTU19GRUVEOiAnaHR0cHM6Ly9nZGF0YS55b3V0dWJlLmNvbS9mZWVkcy9hcGkvdmlkZW9zP3Y9MiZhbHQ9cnNzJm9yZGVyYnk9cHVibGlzaGVkJmNhdGVnb3J5PSU3Qmh0dHAlM0ElMkYlMkZnZGF0YS55b3V0dWJlLmNvbSUyRnNjaGVtYXMlMkYyMDA3JTJGa2V5d29yZHMuY2F0JTdEezB9J1xyXG4gICAgREVGQVVMVF9LRVlXT1JEOiAneXRkbCdcclxuICAgIFdFQkNBTV9WSURFT19USVRMRTogJ1dlYmNhbSBTdWJtaXNzaW9uJ1xyXG4gICAgV0VCQ0FNX1ZJREVPX0RFU0NSSVBUSU9OOiAnVXBsb2FkZWQgdmlhIGEgd2ViY2FtLidcclxuICAgIFJFSkVDVEVEX1ZJREVPU19QTEFZTElTVDogJ1JlamVjdGVkIFlUREwgU3VibWlzc2lvbnMnXHJcbiAgICBOT19USFVNQk5BSUxfVVJMOiAnLy9pLnl0aW1nLmNvbS92aS9ocWRlZmF1bHQuanBnJ1xyXG4gICAgVklERU9fQ09OVEFJTkVSX1RFTVBMQVRFOiAnPGxpPjxkaXYgY2xhc3M9XCJ2aWRlby1jb250YWluZXIge2FkZGl0aW9uYWxDbGFzc31cIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwic3VibWl0LXZpZGVvLWJ1dHRvblwiIHZhbHVlPVwiU3VibWl0IFZpZGVvXCI+PGRpdj48c3BhbiBjbGFzcz1cInZpZGVvLXRpdGxlXCI+e3RpdGxlfTwvc3Bhbj48c3BhbiBjbGFzcz1cInZpZGVvLWR1cmF0aW9uXCI+KHtkdXJhdGlvbn0pPC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJ2aWRlby11cGxvYWRlZFwiPlVwbG9hZGVkIG9uIHt1cGxvYWRlZERhdGV9PC9kaXY+PGRpdiBjbGFzcz1cInRodW1ibmFpbC1jb250YWluZXJcIiBkYXRhLXZpZGVvLWlkPVwie3ZpZGVvSWR9XCI+PGltZyBzcmM9XCJ7dGh1bWJuYWlsVXJsfVwiIGNsYXNzPVwidGh1bWJuYWlsLWltYWdlXCI+PGltZyBzcmM9XCJpbWFnZXMvcGxheS5wbmdcIiBjbGFzcz1cInBsYXktb3ZlcmxheVwiPjwvZGl2PjwvZGl2PjwvbGk+J1xyXG4gICAgVklERU9fTElfVEVNUExBVEU6ICc8bGk+PGRpdiBjbGFzcz1cInZpZGVvLWNvbnRhaW5lciB7MH1cIj48aW5wdXQgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwic3VibWl0LXZpZGVvLWJ1dHRvblwiIGRhdGEtdmlkZW8taWQ9XCJ7MX1cIiBkYXRhLWV4aXN0aW5nLWtleXdvcmRzPVwiezJ9XCIgdmFsdWU9XCJTdWJtaXQgVmlkZW9cIj48ZGl2PjxzcGFuIGNsYXNzPVwidmlkZW8tdGl0bGVcIj57M308L3NwYW4+PHNwYW4gY2xhc3M9XCJ2aWRlby1kdXJhdGlvblwiPih7NX0pPC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJ2aWRlby11cGxvYWRlZFwiPlVwbG9hZGVkIG9uIHs0fTwvZGl2PjxkaXYgY2xhc3M9XCJ0aHVtYm5haWwtY29udGFpbmVyXCIgZGF0YS12aWRlby1pZD1cInsxfVwiPjxpbWcgc3JjPVwiezZ9XCIgY2xhc3M9XCJ0aHVtYm5haWwtaW1hZ2VcIj48aW1nIHNyYz1cIi4vaW1hZ2VzL3BsYXkucG5nXCIgY2xhc3M9XCJwbGF5LW92ZXJsYXlcIj48L2Rpdj48L2Rpdj48L2xpPidcclxuICAgIEFETUlOX1ZJREVPX0xJX1RFTVBMQVRFOiAnPGxpPjxkaXYgY2xhc3M9XCJ2aWRlby1jb250YWluZXJcIj57YnV0dG9uc0h0bWx9PGRpdj48c3BhbiBjbGFzcz1cInZpZGVvLXRpdGxlXCI+e3RpdGxlfTwvc3Bhbj48c3BhbiBjbGFzcz1cInZpZGVvLWR1cmF0aW9uXCI+KHtkdXJhdGlvbn0pPC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJ2aWRlby11cGxvYWRlZFwiPlVwbG9hZGVkIG9uIHt1cGxvYWRlZERhdGV9IGJ5IHt1cGxvYWRlcn08L2Rpdj48ZGl2IGNsYXNzPVwidGh1bWJuYWlsLWNvbnRhaW5lclwiIGRhdGEtdmlkZW8taWQ9XCJ7dmlkZW9JZH1cIj48aW1nIHNyYz1cInt0aHVtYm5haWxVcmx9XCIgY2xhc3M9XCJ0aHVtYm5haWwtaW1hZ2VcIj48aW1nIHNyYz1cIi4vaW1hZ2VzL3BsYXkucG5nXCIgY2xhc3M9XCJwbGF5LW92ZXJsYXlcIj48L2Rpdj48L2Rpdj48L2xpPidcclxuICAgIFBMQVlMSVNUX0xJX1RFTVBMQVRFOiAnPGxpIGRhdGEtcGxheWxpc3QtbmFtZT1cIntwbGF5bGlzdE5hbWV9XCIgZGF0YS1zdGF0ZT1cImVtYmVkLWNvZGVzXCIgZGF0YS1wbGF5bGlzdC1pZD1cIntwbGF5bGlzdElkfVwiPntwbGF5bGlzdE5hbWV9PC9saT4nXHJcblxyXG53ZWJjYW0gPVxyXG4gICAgaW5pdDogKCkgLT5cclxuICAgICAgICBpZiBub3QgWVQ/IG9yIG5vdCBZVC5VcGxvYWRXaWRnZXQ/XHJcbiAgICAgICAgICAgIHdpbmRvdy5vbllvdVR1YmVJZnJhbWVBUElSZWFkeSA9ICgpIC0+XHJcbiAgICAgICAgICAgICAgICB3ZWJjYW0ubG9hZFVwbG9hZFdpZGdldCgpXHJcbiAgICAgICAgICAgICQuZ2V0U2NyaXB0KCcvL3d3dy55b3V0dWJlLmNvbS9pZnJhbWVfYXBpJylcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHdlYmNhbS5sb2FkVXBsb2FkV2lkZ2V0KClcclxuXHJcbiAgICBsb2FkVXBsb2FkV2lkZ2V0OiAoKSAtPlxyXG4gICAgICAgIG5ldyBZVC5VcGxvYWRXaWRnZXQoJ3dlYmNhbS13aWRnZXQnLFxyXG4gICAgICAgICAgICB3ZWJjYW1Pbmx5OiB0cnVlXHJcbiAgICAgICAgICAgIGV2ZW50czpcclxuICAgICAgICAgICAgICAgIG9uQXBpUmVhZHk6IChldmVudCkgLT5cclxuICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc2V0VmlkZW9UaXRsZShjb25maWcuVklERU9fVElUTEUgb3IgY29uc3RhbnRzLldFQkNBTV9WSURFT19USVRMRSlcclxuICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc2V0VmlkZW9EZXNjcmlwdGlvbihjb25maWcuVklERU9fREVTQ1JJUFRJT04gb3IgY29uc3RhbnRzLldFQkNBTV9WSURFT19ERVNDUklQVElPTilcclxuICAgICAgICAgICAgICAgICAgICAjIGV2ZW50LnRhcmdldC5zZXRWaWRlb0tleXdvcmRzKFt1dGlscy5nZW5lcmF0ZUtleXdvcmRGcm9tUGxheWxpc3RJZChnbG9iYWxzLmhhc2hQYXJhbXMucGxheWxpc3QpXSlcclxuXHJcbiAgICAgICAgICAgICAgICBvblVwbG9hZFN1Y2Nlc3M6IChldmVudCkgLT5cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIldlYmNhbSBzdWJtaXNzaW9uIHN1Y2Nlc3MhXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3lvdXR1YmVfaWQnKS52YWwoZXZlbnQuZGF0YS52aWRlb0lkKVxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5WSURSRUNPUkRFUi5jbG9zZSgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICMgdXRpbHMuYWRkVmlkZW9Ub1BsYXlsaXN0KFwiUGVuZGluZ1wiLCBldmVudC5kYXRhLnZpZGVvSWQpXHJcblxyXG4gICAgICAgICAgICAgICAgb25TdGF0ZUNoYW5nZTogKGV2ZW50KSAtPlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGV2ZW50LmRhdGEuc3RhdGUgPT0gWVQuVXBsb2FkV2lkZ2V0U3RhdGUuRVJST1JcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIldlYmNhbSBzdWJtaXNzaW9uIGVycm9yIVwiKVxyXG4gICAgICAgIClcclxuXHJcbnV0aWxzID1cclxuICAgIGl0ZW1zSW5SZXNwb25zZTogKHJlc3BvbnNlKSAtPlxyXG4gICAgICAgIHJldHVybiAoJ2l0ZW1zJyBpbiByZXNwb25zZSBhbmQgcmVzcG9uc2UuaXRlbXMubGVuZ3RoID4gMClcclxuXHJcbiAgICAjIGFkZFZpZGVvVG9QbGF5bGlzdDogKHBsYXlsaXN0SWQsIHZpZGVvSWQpIC0+XHJcbiAgICAjICAgICBjb25zb2xlLmxvZyhcIlRyeWluZyB0byBhZGQgdmlkZW8gdG8gcGxheWxpc3QhXCIpXHJcbiAgICAjICAgICBjb25zb2xlLmxvZyh2aWRlb0lkKVxyXG4gICAgIyAgICAgY29uc29sZS5sb2cocGxheWxpc3RJZClcclxuXHJcbiAgICAjICAgICBsc2NhY2hlLnJlbW92ZShjb25zdGFudHMuR0RBVEFfU0VSVkVSICsgJy9mZWVkcy9hcGkvdXNlcnMvZGVmYXVsdC9wbGF5bGlzdHMnKVxyXG4gICAgIyAgICAgbHNjYWNoZS5yZW1vdmUocGxheWxpc3RJZClcclxuXHJcbiAgICAjICAgICByZXF1ZXN0ID0gZ2FwaS5jbGllbnQueW91dHViZS5wbGF5bGlzdEl0ZW1zLmluc2VydChcclxuICAgICMgICAgICAgICAgICAgcGFydDogJ3NuaXBwZXQnXHJcbiAgICAjICAgICAgICAgICAgIHJlc291cmNlOlxyXG4gICAgIyAgICAgICAgICAgICAgICAgc25pcHBldDpcclxuICAgICMgICAgICAgICAgICAgICAgICAgICBwbGF5bGlzdElkOiBwbGF5bGlzdElkXHJcbiAgICAjICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VJZDpcclxuICAgICMgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogJ3lvdXR1YmUjdmlkZW8nXHJcbiAgICAjICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvSWQ6IHZpZGVvSWRcclxuICAgICMgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogMFxyXG4gICAgIyAgICAgKVxyXG5cclxuICAgICMgICAgIHJlcXVlc3QuZXhlY3V0ZSgocmVzcG9uc2UpIC0+XHJcbiAgICAjICAgICAgICAgaWYgJ2Vycm9yJyBpbiByZXNwb25zZVxyXG4gICAgIyAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5lcnJvcilcclxuICAgICMgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ291bGQgbm90IGFkZCB2aWRlbyBwbGF5bGlzdC4gJylcclxuICAgICMgICAgICAgICBlbHNlXHJcbiAgICAjICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzIGFkZGluZyB2aWRlbyB0byBwbGF5bGlzdCEnKVxyXG4gICAgIyAgICAgKVxyXG5cclxuYXV0aCA9XHJcbiAgICBpbml0QXV0aDogKCkgLT5cclxuICAgICAgICB3aW5kb3dbY29uc3RhbnRzLkNMSUVOVF9MSUJfTE9BRF9DQUxMQkFDS10gPSAoKSAtPlxyXG4gICAgICAgICAgICBnYXBpLmF1dGguaW5pdCgoKSAtPlxyXG4gICAgICAgICAgICAgICAgaWYgbHNjYWNoZS5nZXQoY29uc3RhbnRzLkRJU1BMQVlfTkFNRV9DQUNIRV9LRVkpICMgRklYTUVcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSAtPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYXBpLmF1dGguYXV0aG9yaXplKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50X2lkOiBjb25maWcuT0FVVEgyX0NMSUVOVF9JRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGU6IFtjb25zdGFudHMuT0FVVEgyX1NDT1BFXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1tZWRpYXRlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICwgYXV0aC5vbkF1dGhSZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgLCAxKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhdXRoIHNjcmlwdCBsYXVuY2hlZCcpXHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcXVlc3RpbmcgWVQgbG9naW4nKVxyXG4gICAgICAgICAgICAgICAgICAgICMgZ2FwaS5hdXRoLmF1dGhvcml6ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgIyAgICAgY2xpZW50X2lkOiBjb25maWcuT0FVVEgyX0NMSUVOVF9JRFxyXG4gICAgICAgICAgICAgICAgICAgICMgICAgIHNjb3BlOiBbY29uc3RhbnRzLk9BVVRIMl9TQ09QRV1cclxuICAgICAgICAgICAgICAgICAgICAjICAgICBpbW1lZGlhdGU6IGZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICMgICAgICwgYXV0aC5vbkF1dGhSZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICAjIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICQuZ2V0U2NyaXB0KGNvbnN0YW50cy5DTElFTlRfTElCX1VSTCArIGNvbnN0YW50cy5DTElFTlRfTElCX0xPQURfQ0FMTEJBQ0spXHJcblxyXG4gICAgb25BdXRoUmVzdWx0OiAoYXV0aFJlc3VsdCkgLT5cclxuICAgICAgICBpZiBhdXRoUmVzdWx0XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHb3QgYXV0aCByZXN1bHQnLCBhdXRoUmVzdWx0KVxyXG4gICAgICAgICAgICBnYXBpLmNsaWVudC5sb2FkKGNvbnN0YW50cy5ZT1VUVUJFX0FQSV9TRVJWSUNFX05BTUUsIGNvbnN0YW50cy5ZT1VUVUJFX0FQSV9WRVJTSU9OLCBhdXRoLm9uWW91VHViZUNsaWVudExvYWQpXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQXV0aCBmYWlsZWQnKVxyXG4gICAgICAgICAgICBsc2NhY2hlLmZsdXNoKCkgIyBGSVhNRVxyXG4gICAgICAgICAgICAjIHV0aWxzLnJlZGlyZWN0KCdsb2dpbicpXHJcblxyXG4gICAgb25Zb3VUdWJlQ2xpZW50TG9hZDogKCkgLT5cclxuICAgICAgICAjICAgdmFyIG5leHRTdGF0ZSA9IGdsb2JhbHMuaGFzaFBhcmFtcy5zdGF0ZSB8fCAnJztcclxuICAgICAgICAjICAgaWYgKG5leHRTdGF0ZSA9PSAnbG9naW4nKSB7XHJcbiAgICAgICAgIyAgICAgbmV4dFN0YXRlID0gJyc7XHJcbiAgICAgICAgIyAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZygnWW91dHViZSBjbGllbnQgbG9hZGVkIScpXHJcbiAgICAgICAgaWYgbHNjYWNoZS5nZXQoY29uc3RhbnRzLkRJU1BMQVlfTkFNRV9DQUNIRV9LRVkpICMgRklYTUVcclxuICAgICAgICAgICAgIyB1dGlscy5yZWRpcmVjdChuZXh0U3RhdGUpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmVxdWVzdCA9IGdhcGkuY2xpZW50W2NvbnN0YW50cy5ZT1VUVUJFX0FQSV9TRVJWSUNFX05BTUVdLmNoYW5uZWxzLmxpc3QoXHJcbiAgICAgICAgICAgICAgICBtaW5lOiB0cnVlXHJcbiAgICAgICAgICAgICAgICBwYXJ0OiAnc25pcHBldCxjb250ZW50RGV0YWlscyxzdGF0dXMnXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgcmVxdWVzdC5leGVjdXRlKCAocmVzcG9uc2UpIC0+XHJcbiAgICAgICAgICAgICAgICBpZiB1dGlscy5pdGVtc0luUmVzcG9uc2UocmVzcG9uc2UpICMgRklYTUVcclxuICAgICAgICAgICAgICAgICAgICBpZiByZXNwb25zZS5pdGVtc1swXS5zdGF0dXMuaXNMaW5rZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbHNjYWNoZS5zZXQoY29uc3RhbnRzLlVQTE9BRFNfTElTVF9JRF9DQUNIRV9LRVksIHJlc3BvbnNlLml0ZW1zWzBdLmNvbnRlbnREZXRhaWxzLnJlbGF0ZWRQbGF5bGlzdHMudXBsb2FkcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgbHNjYWNoZS5zZXQoY29uc3RhbnRzLkRJU1BMQVlfTkFNRV9DQUNIRV9LRVksIHJlc3BvbnNlLml0ZW1zWzBdLnNuaXBwZXQudGl0bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxzY2FjaGUuc2V0KGNvbnN0YW50cy5QUk9GSUxFX1BJQ1RVUkVfQ0FDSEVfS0VZLCByZXNwb25zZS5pdGVtc1swXS5zbmlwcGV0LnRodW1ibmFpbHMuZGVmYXVsdC51cmwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgdXRpbHMucmVkaXJlY3QobmV4dFN0YXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignWW91ciBhY2NvdW50IGNhbm5vdCB1cGxvYWQgdmlkZW9zLiBQbGVhc2UgdmlzaXQgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3NpZ25pbj9uZXh0PS9jcmVhdGVfY2hhbm5lbFwiPmh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3NpZ25pbj9uZXh0PS9jcmVhdGVfY2hhbm5lbDwvYT4gdG8gYWRkIGEgWW91VHViZSBjaGFubmVsIHRvIHlvdXIgYWNjb3VudCwgYW5kIHRyeSBhZ2Fpbi4nKVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gcmV0cmlldmUgY2hhbm5lbCBpbmZvLlwiKVxyXG4gICAgICAgICAgICApXHJcblxyXG5kb2VzX21lZXRfcmVxdWlyZW1lbnRzID0gLT5cclxuICAgIGlmIG5vdCAkLnN1cHBvcnQuY29yc1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJCcm93c2VyIG5vdCBzdXBwb3J0ZWQhXCIpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuXHJcblxyXG5leHBvcnRzLnNldHVwID0gLT5cclxuICAgIGlmIG5vdCBjb25maWcuT0FVVEgyX0NMSUVOVF9JRCBvciBub3QgY29uZmlnLkRFVkVMT1BFUl9LRVlcclxuICAgICAgICBjb25zb2xlLmxvZyhcIk5PVCBDT05GSUdVUkVEIVwiKVxyXG4gICAgZWxzZVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29uZmlndXJlZCFcIilcclxuICAgICAgICBpZiBkb2VzX21lZXRfcmVxdWlyZW1lbnRzXHJcbiAgICAgICAgICAgIGF1dGguaW5pdEF1dGgoKVxyXG4gICAgICAgICAgICB3ZWJjYW0uaW5pdCgpXHJcbiIsIlxyXG5zaXRlVXJsID0gJ2h0dHA6Ly93d3cudGhhbmstYS10ZWFjaGVyLm9yZydcclxuXHJcbnNldHVwRmFjZWJvb2sgPSAtPlxyXG4gICAgJC5nZXRTY3JpcHQgJy8vY29ubmVjdC5mYWNlYm9vay5uZXQvZW5fVUsvYWxsLmpzJywgLT5cclxuICAgICAgICBGQi5pbml0IHthcHBJZDogJzE0NDQ5NTQ2ODU3MzUxNzYnfVxyXG5cclxuICAgICQoJyNzaGFyZS1mYWNlYm9vaycpLmNsaWNrIC0+XHJcbiAgICAgICAgRkIudWlcclxuICAgICAgICAgICAgbWV0aG9kOiAnZmVlZCcsXHJcbiAgICAgICAgICAgIGxpbms6IHNpdGVVcmwsXHJcbiAgICAgICAgICAgIGNhcHRpb246ICdUaGFuayBhIHRlYWNoZXIhJ1xyXG5cclxuc2V0dXBUd2l0dGVyID0gLT5cclxuICAgIGVuY29kZWQgPSBlbmNvZGVVUklDb21wb25lbnQgc2l0ZVVybFxyXG4gICAgdHdpdHRlclVybCA9IFwiaHR0cHM6Ly90d2l0dGVyLmNvbS9zaGFyZT91cmw9I3tlbmNvZGVkfSZ2aWE9d21tZWR1XCJcclxuICAgICQoJyNzaGFyZS10d2l0dGVyJylcclxuICAgICAgICAuYXR0ciAnaHJlZicsIHR3aXR0ZXJVcmxcclxuICAgICAgICAuYXR0ciAndGFyZ2V0JywgJ19ibGFuaydcclxuXHJcbmV4cG9ydHMuc2V0dXAgPSAtPlxyXG4gICAgc2V0dXBGYWNlYm9vaygpXHJcbiAgICBzZXR1cFR3aXR0ZXIoKVxyXG4gICAgIl19
